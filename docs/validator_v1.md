# Validator v1 Specification (M1 Read-Only Release)

## 1. Purpose

The Validator is the safety and correctness layer between the AI assistant and the database. Its job is to analyze every SQL query generated by the AI *before* it reaches Supabase, and decide:

- **Approve** (safe & valid)
- **Reject** (unsafe, invalid, or too complex)

This prevents accidental damage, hallucinations, and invalid queries during Milestone M1.

---

## 2. Position in the System

Flow for each user question:

1. User asks a question  
2. AI proposes SQL  
3. **Validator inspects the SQL**  
4. If valid → forward to Supabase  
5. If invalid → return an error to AI  
6. AI revises the query or informs the user  

Nothing touches the database without passing validation.

---

## 3. Inputs and Outputs

### Input
- The SQL string generated by the AI  
- The `schema_registry.json` file (our “truth” about tables, columns, and relationships)  
- A mode flag: `read_only = true` (M1)

### Output
One of:

**Approved**
```json
{ "status": "ok" }
